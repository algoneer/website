'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},_createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var _window$preact=window.preact,Component=_window$preact.Component,h=_window$preact.h,render=_window$preact.render,App=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:'componentDidMount',value:function a(){this.setState({message:'Hello!'})}},{key:'render',value:function(){var a=this.props,b=a.list;return h('div',{id:'app'},h(Form,{list:b}))}}]),b}(Component);String.prototype.format=function(){'use strict';var a,b=this.toString(),c=_typeof(arguments[0]);a=0==arguments.length?{}:'string'===c||'number'===c?Array.prototype.slice.call(arguments):arguments[0];for(var d=[],e=b;0<e.length;){var f=e.match(/\{(?!\{)([\w\d]+)\}(?!\})/);if(null!==f){var g=e.substr(0,f.index),h=e.substr(f.index,f[0].length);e=e.substr(f.index+f[0].length);var i=parseInt(f[1]);d.push(g),i==i?d.push(a[i]):d.push(a[f[1]])}else d.push(e),e=''}return d};var Form=function(a){function b(){var a,c,d,e;_classCallCheck(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return e=(c=(d=_possibleConstructorReturn(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(g))),d),d.state={submitting:!1,status:'pending',data:{},errors:{}},c),_possibleConstructorReturn(d,e)}return _inherits(b,a),_createClass(b,[{key:'encodeData',value:function d(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+'='+encodeURIComponent(a[c]));return b.join('&')}},{key:'submitData',value:function e(a){var b=this,c=new XMLHttpRequest;c.open('POST','https://auth.algoneer.org/v1/contact/submit'),c.setRequestHeader('Content-Type','application/json;charset=UTF-8');var d=function(){var a=JSON.parse(c.responseText);void 0!==a&&void 0!==a.errors?b.setState({status:'pending',errors:a.errors}):b.setState({status:'failed'})};c.onload=function(){if(200!=c.status&&201!=c.status)d();else{var a=JSON.parse(c.responseText);b.setState({status:'success',data:a})}},c.onerror=function(){d()},c.send(JSON.stringify(a))}},{key:'onSubmit',value:function g(a){a.preventDefault();var b=this.state,c=this.props,d=c.list,e=b.data,f=this.validate(e);return 0<Object.keys(f).length?void this.setState({errors:f}):void(this.setState({status:'sending',errors:{}}),this.submitData({email:e.email,name:e.name,company:e.company,phone:e.phone,extra_data:{list:d,company_size:e.companySize,specific_interests:e.specificInterests}}))}},{key:'validate',value:function g(a){var b={},c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i;a.email||(b.email=t('email-missing')),c.test(a.email)||(b.email=t('email-invalid'));var d=/^.{3,50}$/i;a.company||(b.company=t('company-name-missing')),d.test(a.company)||(b.company=t('company-name-invalid'));var e=/^.{3,50}$/i;a.name||(b.name=t('contact-name-invalid')),a.companySize||(b.companySize=t('company-size-invalid')),e.test(a.name)||(b.name=t('contact-name-invalid'));var f=/^[0-9\-\/\+]{3,50}$/i;return a.phone&&!f.test(a.phone)&&(b.phone=t('phone-number-invalid')),b}},{key:'setValue',value:function d(a,b){var c=this.state.data;c[a]=b.target.value,this.setState({data:c})}},{key:'renderSuccess',value:function a(){return h('div',null,h('h2',null,t('thanks')),h('p',{class:'text-success'},t('data-has-been-saved')))}},{key:'render',value:function(){return'success'==this.state.status?this.renderSuccess():this.renderForm()}},{key:'renderForm',value:function i(){function a(a){return f[a]?h('p',{class:'text-danger'},f[a]):null}var b,d=this,c=this.state,e=c.data,f=c.errors,g=this.state.status;return'failed'==g&&(b=h('p',{class:'alert alert-danger'},t('something-went-wrong',{email:h('a',{href:'mailto:'+t('signup-email')},t('signup-email'))}))),h('form',{ref:function b(a){return d.form=a},id:'signup',onSubmit:this.onSubmit.bind(this)},b,h('fieldset',{disabled:'sending'===g},h('div',{class:'form-group row'},h('label',{for:'name',class:'col-md-2 col-lg-2 col-form-label'},t('contact-name')),h('div',{class:'col-md-4 col-lg-4'},h('input',{type:'text',class:'form-control',id:'name',placeholder:t('name-placeholder'),onChange:this.setValue.bind(this,'name'),value:e.name||''}),a('name')),h('label',{for:'company',class:'col-md-2 col-lg-2 col-form-label'},t('company-name')),h('div',{class:'col-md-4 col-lg-4'},h('input',{type:'text',class:'form-control',id:'company',placeholder:t('company-placeholder'),onChange:this.setValue.bind(this,'company'),value:e.company||''}),a('company'))),h('div',{class:'form-group row'},h('label',{for:'email',class:'col-md-2 col-lg-2 col-form-label'},t('email')),h('div',{class:'col-md-4 col-lg-4'},h('input',{type:'email',class:'form-control',id:'email',placeholder:t('email-placeholder'),onChange:this.setValue.bind(this,'email'),value:e.email||''}),a('email')),h('label',{for:'phone',class:'col-md-2 col-lg-2 col-form-label'},t('phone')),h('div',{class:'col-md-4 col-lg-4'},h('input',{type:'phone',class:'form-control',id:'phone',placeholder:t('phone-placeholder'),onChange:this.setValue.bind(this,'phone'),value:e.phone||''}),a('phone'))),h('div',{class:'form-group row'},h('label',{for:'email',class:'col-md-2 col-lg-2 col-form-label'},t('company-size')),h('div',{class:'col-md-4 col-lg-4'},h('select',{className:'form-control',id:'company-size',onChange:this.setValue.bind(this,'companySize'),value:e.companySize||''},h('option',{value:''},t('company-size-placeholder')),h('option',{value:'1-2'},'1-2'),h('option',{value:'3-10'},'3-10'),h('option',{value:'11-100'},'11-100'),h('option',{value:'101-1000'},'101-1000'),h('option',{value:'1001'},'> 1001')),a('companySize')),h('label',{for:'phone',class:'col-md-2 col-lg-2 col-form-label'},t('specific-interests')),h('div',{class:'col-md-4 col-lg-4'},h('textarea',{class:'form-control',id:'specific-interests',placeholder:t('specific-interests-placeholder'),onChange:this.setValue.bind(this,'specificInterests'),value:e.specificInterests||''}),a('specificInterests'))),h('div',{class:'form-group row align-items-center'},h('label',{class:'d-xs-none col-md-2 col-lg-2 col-form-label'}),h('div',{class:'col-md-10 col-lg-10'},h('button',{type:'submit',class:'btn btn-contact btn-lg'},'sending'==g?t('please-wait'):t('submit'))))))}}]),b}(Component);function renderSignup(){render===void 0&&setTimeout(renderSignup,1e3);var a=document.getElementById('signup-wrapper');a.innerHTML='',render(h(App,{list:window.signupList}),a)}window.addEventListener('load',renderSignup);